schema: '2.0'
stages:
  fcgr_from_msa:
    cmd: python src/fcgr_from_msa.py
    deps:
    - path: data/msas
      md5: 1e94c02feab399e8c43aa7b58a57475f.dir
      size: 1666331043
      nfiles: 37425
    - path: src/fcgr_from_msa.py
      md5: faf9de73d2e429dbb9e7f51b8e15775f
      size: 1092
    params:
      params.yaml:
        fcgr_from_msa.folder_msa: data/msas
        fcgr_from_msa.path_fcgr: data/fcgr
        k: 6
    outs:
    - path: data/fcgr
      md5: dbaea4c27295a00836a29709229b0683.dir
      size: 1231001216
      nfiles: 37421
  train:
    cmd: python src/train.py
    deps:
    - path: data/fcgr
      md5: dbaea4c27295a00836a29709229b0683.dir
      size: 1231001216
      nfiles: 37421
    - path: src/train.py
      md5: 8032a0c460f77e84887607c0ee570730
      size: 2845
    params:
      params.yaml:
        train.architecture: CNNAutoencoderCAEBNLeakyRelu
        train.batch_size: 32
        train.epochs: 50
        train.latent_dim: 100
        train.patiente_early_stopping: 20
        train.patiente_learning_rate: 15
        train.train_size: 0.8
    outs:
    - path: data/train
      md5: 7a36c24038b685278875c69131a5a8b2.dir
      size: 272907912
      nfiles: 3
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/train
      md5: 7a36c24038b685278875c69131a5a8b2.dir
      size: 272907912
      nfiles: 3
    - path: src/evaluate.py
      md5: 63911bfe9115e7037955278350de070d
      size: 1157
    outs:
    - path: data/eval/metrics.json
      md5: 0d3ad10ea7f7235b5758fd92364db787
      size: 136
